version: "3.1"

intents:
  - greet
  - affirm
  - deny
  - emergency_fire
  - provide_location
  - provide_number_people
  - inform_injured_yes
  - inform_injured_no
  - inform_injured_unsure
  - fire_spreading_yes
  - fire_spreading_no
  - safe_location
  - cannot_evacuate
  - goodbye
  - nlu_fallback

entities:
  - location
  - number

slots:
  location:
    type: text
    mappings:
      - type: from_entity
        entity: location
      - type: from_text
        intent: provide_location
  
  people_count:
    type: text
    mappings:
      - type: from_text
        intent: provide_number_people
  
  has_injuries:
    type: text
    mappings:
      - type: custom
  
  fire_spreading:
    type: text
    mappings:
      - type: custom
  
  emergency_id:
    type: text
    mappings:
      - type: custom

responses:
  utter_greet:
    - text: "ğŸ‘‹ Hello! I'm Mansi, your AI emergency response assistant. I'm here to help coordinate emergency services."
  
  utter_confirm_fire_emergency:
    - text: "ğŸš¨ I'm here to help. Are you reporting a fire emergency?"
  
  utter_ask_location_detailed:
    - text: "ğŸ“ Please share your current location (address or nearby landmark)."
  
  utter_ask_number_people:
    - text: "ğŸ‘¥ How many people are currently in danger or need rescue?"
  
  utter_ask_injuries:
    - text: "ğŸ¥ Is anyone injured?\n\nPlease respond with:\nâ€¢ Yes\nâ€¢ No\nâ€¢ Not sure"
  
  utter_ask_fire_spreading:
    - text: "ğŸ”¥ Is the fire spreading rapidly?\n\nPlease respond with:\nâ€¢ Yes\nâ€¢ No"
  
  utter_emergency_dispatched:
    - text: "âœ… **EMERGENCY ALERT SENT**\n\nFire department and emergency services have been automatically alerted with your location and situation details."
  
  utter_emergency_dispatched_urgent:
    - text: "ğŸš¨ **URGENT EMERGENCY ALERT SENT**\n\nFire department, ambulance, and emergency services are being dispatched immediately to your location!"
  
  utter_ask_can_evacuate:
    - text: "âš ï¸ Can you safely evacuate to a safe location? Have you moved to safety?"
  
  utter_good_evacuated:
    - text: "âœ… Good! You did the right thing by evacuating."
  
  utter_stay_safe_outside:
    - text: "ğŸ“‹ **IMPORTANT - While you wait:**\n\nâ€¢ Stay at least 100 feet away from the building\nâ€¢ Do NOT re-enter for any reason\nâ€¢ Account for all people\nâ€¢ Alert others nearby\nâ€¢ Wait for emergency responders\n\nğŸš’ Fire department is on their way. ETA: 5-8 minutes."
  
  utter_trapped_instructions:
    - text: "ğŸ†˜ **YOU ARE TRAPPED - FOLLOW THESE STEPS:**\n\n1. Close doors between you and fire\n2. Seal door cracks with wet towels/cloth\n3. Stay LOW to the ground (fresh air)\n4. Signal from window if possible\n5. Cover nose/mouth with wet cloth\n6. Stay calm - help is coming fast"
  
  utter_help_coming:
    - text: "ğŸš’ **Fire rescue team is being dispatched NOW**\n\nThey have your exact location and know people are trapped. DO NOT HANG UP. Stay on this line."
  
  utter_goodbye:
    - text: "Stay safe! If the situation changes, I'm here to help."
  
  utter_fallback:
    - text: "I didn't quite understand. Could you please respond with the requested information?"

actions:
  - action_save_location
  - action_save_people_count
  - action_save_injury_status
  - action_process_emergency_alert

session_config:
  session_expiration_time: 60
  carry_over_slots_to_new_session: true